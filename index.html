import React, { useState, useEffect } from "react";
import { Button } from "@/components/ui/button";
import { Card, CardContent } from "@/components/ui/card";

const words = ["react", "python", "coding", "puzzle", "anagram", "javascript"];

const shuffleWord = (word) => {
  return word
    .split("")
    .sort(() => Math.random() - 0.5)
    .join("");
};

export default function AnagramGame() {
  const [originalWord, setOriginalWord] = useState("");
  const [shuffledWord, setShuffledWord] = useState("");
  const [input, setInput] = useState("");
  const [message, setMessage] = useState("");

  useEffect(() => {
    generateNewWord();
  }, []);

  const generateNewWord = () => {
    const word = words[Math.floor(Math.random() * words.length)];
    setOriginalWord(word);
    setShuffledWord(shuffleWord(word));
    setInput("");
    setMessage("");
  };

  const checkAnswer = () => {
    if (input.toLowerCase() === originalWord) {
      setMessage("Correct! Well done.");
    } else {
      setMessage("Try again!");
    }
  };

  return (
    <div className="flex flex-col items-center gap-4 p-6">
      <Card className="w-96 text-center p-4">
        <CardContent>
          <h2 className="text-xl font-bold mb-2">Anagram Game</h2>
          <p className="text-lg">Unscramble the word: <strong>{shuffledWord}</strong></p>
          <input
            type="text"
            value={input}
            onChange={(e) => setInput(e.target.value)}
            className="border p-2 mt-4 w-full rounded"
            placeholder="Your answer"
          />
          <div className="flex justify-between mt-4">
            <Button onClick={checkAnswer} className="bg-blue-500 text-white">Submit</Button>
            <Button onClick={generateNewWord} className="bg-gray-500 text-white">New Word</Button>
          </div>
          {message && <p className="mt-4 text-lg font-bold">{message}</p>}
        </CardContent>
      </Card>
    </div>
  );
}
